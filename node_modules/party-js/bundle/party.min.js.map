{"version":3,"sources":["webpack://party/webpack/universalModuleDefinition","webpack://party/./src/components/circle.ts","webpack://party/./src/components/color.ts","webpack://party/./src/components/gradient.ts","webpack://party/./src/components/index.ts","webpack://party/./src/components/numericSpline.ts","webpack://party/./src/components/rect.ts","webpack://party/./src/components/spline.ts","webpack://party/./src/components/vector.ts","webpack://party/./src/containers.ts","webpack://party/./src/debug.ts","webpack://party/./src/index.ts","webpack://party/./src/particles/emitter.ts","webpack://party/./src/particles/options/emissionOptions.ts","webpack://party/./src/particles/options/emitterOptions.ts","webpack://party/./src/particles/options/index.ts","webpack://party/./src/particles/options/renderOptions.ts","webpack://party/./src/particles/particle.ts","webpack://party/./src/particles/renderer.ts","webpack://party/./src/scene.ts","webpack://party/./src/settings.ts","webpack://party/./src/systems/math.ts","webpack://party/./src/systems/modules.ts","webpack://party/./src/systems/random.ts","webpack://party/./src/systems/shapes.ts","webpack://party/./src/systems/sources.ts","webpack://party/./src/systems/variation.ts","webpack://party/./src/templates/confetti.ts","webpack://party/./src/templates/index.ts","webpack://party/./src/templates/sparkles.ts","webpack://party/./src/util/config.ts","webpack://party/./src/util/index.ts","webpack://party/./src/util/lazy.ts","webpack://party/./src/util/rotation.ts","webpack://party/./src/util/rules.ts","webpack://party/webpack/bootstrap","webpack://party/webpack/startup"],"names":["root","factory","exports","module","define","amd","self","Object","defineProperty","value","Circle","x","y","radius","this","zero","Color","math_1","r","g","b","values","Float32Array","rgb","prototype","get","set","Math","floor","enumerable","configurable","mix","color","weight","lerp","toHex","hex","v","toString","padStart","join","fromHex","startsWith","substr","parseInt","fromHsl","h","s","l","hue2rgb","p","q","t","to255","min","white","black","extendStatics","__extends","d","setPrototypeOf","__proto__","Array","hasOwnProperty","call","TypeError","String","__","constructor","create","__spreadArray","to","from","i","il","length","j","Gradient","_super","apply","arguments","interpolate","a","solid","time","simple","colors","_i","step","bind","map","index","Spline","__createBinding","o","m","k","k2","undefined","__exportStar","NumericSpline","slerp","Rect","width","height","fromScreen","window","scrollX","scrollY","innerWidth","innerHeight","fromElement","element","getBoundingClientRect","keys","Error","isArray","evaluate","ascendingKeys","sort","upperKeyIndex","findIndex","lowerKey","upperKey","containedTime","invlerp","Vector","z","xyz","magnitude","sqrt","sqrMagnitude","add","vector","subtract","scale","scalar","normalized","angle","rad2deg","acos","cross","dot","cos","deg2rad","from2dAngle","sin","one","right","up","forward","particleContainer","debugContainer","rootContainer","settings_1","util_1","isContainerActive","container","isConnected","makeContainer","name","styles","parent","document","createElement","id","assign","style","appendChild","Lazy","position","left","top","pointerEvents","userSelect","zIndex","settings","body","margin","padding","border","background","fontFamily","current","overflow","perspective","Debug","containers_1","scene","refreshRate","refreshTimer","tick","delta","displayStyle","debug","display","innerHTML","getDebugInformation","emitters","particles","reduce","acc","cur","infos","round","emitterInfos","emitter","options","loops","isExpired","toFixed","push","default","forceInit","util","math","random","sources","variation","Emitter","Particle","scene_1","Scene","particle_1","emitter_1","vector_1","variation_1","config_1","options_1","currentLoop","durationTimer","emissionTimer","attemptedBurstIndices","overrideDefaults","getDefaultEmitterOptions","emitterOptions","emission","getDefaultEmissionOptions","emissionOptions","renderer","getDefaultRendererOptions","rendererOptions","clearParticles","splice","duration","burstIndex","_a","bursts","burst","includes","count","evaluateVariation","emitParticle","delay","rate","_loop_1","particle","this_1","tickParticle","despawningRules","some","rule","lifetime","useGravity","velocity","gravity","location","modules","moduleFunction","sourceSampler","initialLifetime","initialSpeed","size","initialSize","rotation","initialRotation","initialColor","maxParticles","shift","components_1","sources_1","rectSource","rules_1","bounds","defaultApplyColor","nodeName","toLowerCase","fill","defaultApplyOpacity","opacity","defaultApplyLighting","lighting","filter","abs","defaultApplyTransform","transform","shapeFactory","applyColor","applyOpacity","applyLighting","applyTransform","populatedOptions","Symbol","Renderer","__1","shapes_1","elements","Map","light","enabled","respectReducedMotion","matchMedia","matches","begin","renderedParticles","end","it","result","next","done","remove","delete","renderParticle","has","createParticleElement","lightingCoefficient","rotationToNormal","resolveShapeFactory","cloneNode","debug_1","renderer_1","scheduledTickId","lastTickTimestamp","performance","now","scheduleTick","createEmitter","clearEmitters","sum","requestAnimationFrame","cancelTick","cancelAnimationFrame","timestamp","canRemove","error","console","_b","_c","approximately","clamp","epsilon","PI","max","ModuleBuilder","factor","isRelative","drive","key","driverKey","through","by","driver","driverValue","relative","build","_this","updateDrivenProperty","evaluateModuleDriver","calculateModuleFactor","initial","toUpperCase","randomInsideCircle","randomInsideRect","randomUnitVector","pick","randomRange","arr","theta","rect","circle","resolvableShapes","square","rectangle","roundedSquare","roundedRectangle","star","shape","resolved","dummy","firstElementChild","circleSource","mouseSource","elementSource","dynamicSource","random_1","source","clientX","clientY","HTMLElement","MouseEvent","gradientSample","splineSample","skewRelative","skew","range","spline","amount","percentage","gradient","confetti","modules_1","populated","spread","speed","shapes","sparkles","defaults","overrides","exists","defaultExists","alpha","beta","documentElement","scrollHeight","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"mappings":"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","file":"party.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"party\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"party\"] = factory();\n\telse\n\t\troot[\"party\"] = factory();\n})(self, function() {\nreturn ","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Circle = void 0;\r\n/**\r\n * Represents a circle.\r\n */\r\nvar Circle = /** @class */ (function () {\r\n    /**\r\n     * Creates a new circle at the specified coordinates, with a default radius of 0.\r\n     */\r\n    function Circle(x, y, radius) {\r\n        if (radius === void 0) { radius = 0; }\r\n        this.x = x;\r\n        this.y = y;\r\n        this.radius = radius;\r\n    }\r\n    Circle.zero = new Circle(0, 0);\r\n    return Circle;\r\n}());\r\nexports.Circle = Circle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Color = void 0;\r\nvar math_1 = require(\"../systems/math\");\r\n/**\r\n * Represents a color consisting of RGB values. The components of it are\r\n * represented as integers in the range 0 to 255.\r\n *\r\n * @example\r\n * ```ts\r\n * const a = new Color(12, 59, 219);\r\n * const b = Color.fromHex(\"#ffa68d\");\r\n * const result = a.mix(b);\r\n * ```\r\n */\r\nvar Color = /** @class */ (function () {\r\n    /**\r\n     * Creates a new color instance from the specified RGB components.\r\n     */\r\n    function Color(r, g, b) {\r\n        this.values = new Float32Array(3);\r\n        this.rgb = [r, g, b];\r\n    }\r\n    Object.defineProperty(Color.prototype, \"r\", {\r\n        /**\r\n         * Returns the r-component of the color.\r\n         */\r\n        get: function () {\r\n            return this.values[0];\r\n        },\r\n        /**\r\n         * Modifies the r-component of the color.\r\n         * Note that this also floors the value.\r\n         */\r\n        set: function (value) {\r\n            this.values[0] = Math.floor(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color.prototype, \"g\", {\r\n        /**\r\n         * Returns the g-component of the color.\r\n         */\r\n        get: function () {\r\n            return this.values[1];\r\n        },\r\n        /**\r\n         * Modifies the g-component of the color.\r\n         * Note that this also floors the value.\r\n         */\r\n        set: function (value) {\r\n            this.values[1] = Math.floor(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color.prototype, \"b\", {\r\n        /**\r\n         * Returns the b-component of the color.\r\n         * Note that this also floors the value.\r\n         */\r\n        get: function () {\r\n            return this.values[2];\r\n        },\r\n        /**\r\n         * Modifies the b-component of the color.\r\n         */\r\n        set: function (value) {\r\n            this.values[2] = Math.floor(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color.prototype, \"rgb\", {\r\n        /**\r\n         * Returns the rgb-components of the color, bundled as a copied array.\r\n         */\r\n        get: function () {\r\n            return [this.r, this.g, this.b];\r\n        },\r\n        /**\r\n         * Simultaneously updates the rgb-components of the color, by passing an array.\r\n         */\r\n        set: function (values) {\r\n            this.r = values[0];\r\n            this.g = values[1];\r\n            this.b = values[2];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Mixes the two color together with an optional mixing weight.\r\n     * This weight is 0.5 by default, perfectly averaging the color.\r\n     */\r\n    Color.prototype.mix = function (color, weight) {\r\n        if (weight === void 0) { weight = 0.5; }\r\n        return new Color(math_1.lerp(this.r, color.r, weight), math_1.lerp(this.g, color.g, weight), math_1.lerp(this.b, color.b, weight));\r\n    };\r\n    /**\r\n     * Returns the hexadecimal representation of the color, prefixed by '#'.\r\n     */\r\n    Color.prototype.toHex = function () {\r\n        var hex = function (v) { return v.toString(16).padStart(2, \"0\"); };\r\n        return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\r\n    };\r\n    /**\r\n     * Returns a formatted representation of the color.\r\n     */\r\n    Color.prototype.toString = function () {\r\n        return \"rgb(\" + this.values.join(\", \") + \")\";\r\n    };\r\n    /**\r\n     * Creates a color from the specified hexadecimal string.\r\n     * This string can optionally be prefixed by '#'.\r\n     */\r\n    Color.fromHex = function (hex) {\r\n        if (hex.startsWith(\"#\")) {\r\n            hex = hex.substr(1);\r\n        }\r\n        return new Color(parseInt(hex.substr(0, 2), 16), parseInt(hex.substr(2, 2), 16), parseInt(hex.substr(4, 2), 16));\r\n    };\r\n    /**\r\n     * Creates a color from the specified HSL components.\r\n     *\r\n     * @see https://stackoverflow.com/a/9493060/5507624\r\n     */\r\n    Color.fromHsl = function (h, s, l) {\r\n        h /= 360;\r\n        s /= 100;\r\n        l /= 100;\r\n        if (s === 0) {\r\n            return new Color(l, l, l);\r\n        }\r\n        else {\r\n            var hue2rgb = function (p, q, t) {\r\n                if (t < 0)\r\n                    t += 1;\r\n                if (t > 1)\r\n                    t -= 1;\r\n                if (t < 1 / 6)\r\n                    return p + (q - p) * 6 * t;\r\n                if (t < 1 / 2)\r\n                    return q;\r\n                if (t < 2 / 3)\r\n                    return p + (q - p) * (2 / 3 - t) * 6;\r\n                return p;\r\n            };\r\n            var to255 = function (v) { return Math.min(255, 256 * v); };\r\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n            var p = 2 * l - q;\r\n            return new Color(to255(hue2rgb(p, q, h + 1 / 3)), to255(hue2rgb(p, q, h)), to255(hue2rgb(p, q, h - 1 / 3)));\r\n        }\r\n    };\r\n    /**\r\n     * Returns (1, 1, 1).\r\n     */\r\n    Color.white = new Color(255, 255, 255);\r\n    /**\r\n     * Returns (0, 0, 0).\r\n     */\r\n    Color.black = new Color(0, 0, 0);\r\n    return Color;\r\n}());\r\nexports.Color = Color;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Gradient = void 0;\r\nvar spline_1 = require(\"./spline\");\r\n/**\r\n * Represents a gradient that can be used to interpolate between multiple color.\r\n */\r\nvar Gradient = /** @class */ (function (_super) {\r\n    __extends(Gradient, _super);\r\n    function Gradient() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Interpolates between two color on the gradient.\r\n     */\r\n    Gradient.prototype.interpolate = function (a, b, t) {\r\n        return a.mix(b, t);\r\n    };\r\n    /**\r\n     * Returns a solid gradient from the given color.\r\n     */\r\n    Gradient.solid = function (color) {\r\n        return new Gradient({ value: color, time: 0.5 });\r\n    };\r\n    /**\r\n     * Returns a gradient with evenly spaced keys from the given colors.\r\n     */\r\n    Gradient.simple = function () {\r\n        var colors = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            colors[_i] = arguments[_i];\r\n        }\r\n        var step = 1 / (colors.length - 1);\r\n        return new (Gradient.bind.apply(Gradient, __spreadArray([void 0], colors.map(function (color, index) { return ({\r\n            value: color,\r\n            time: index * step,\r\n        }); }))))();\r\n    };\r\n    return Gradient;\r\n}(spline_1.Spline));\r\nexports.Gradient = Gradient;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./circle\"), exports);\r\n__exportStar(require(\"./color\"), exports);\r\n__exportStar(require(\"./gradient\"), exports);\r\n__exportStar(require(\"./numericSpline\"), exports);\r\n__exportStar(require(\"./rect\"), exports);\r\n__exportStar(require(\"./vector\"), exports);\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumericSpline = void 0;\r\nvar math_1 = require(\"../systems/math\");\r\nvar spline_1 = require(\"./spline\");\r\n/**\r\n * Represents a spline that can take numeric values.\r\n */\r\nvar NumericSpline = /** @class */ (function (_super) {\r\n    __extends(NumericSpline, _super);\r\n    function NumericSpline() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Smoothly interpolates between two keys on the spline.\r\n     */\r\n    NumericSpline.prototype.interpolate = function (a, b, t) {\r\n        return math_1.slerp(a, b, t);\r\n    };\r\n    return NumericSpline;\r\n}(spline_1.Spline));\r\nexports.NumericSpline = NumericSpline;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Rect = void 0;\r\n/**\r\n * Represents a rectangle with an origin and size.\r\n */\r\nvar Rect = /** @class */ (function () {\r\n    function Rect(x, y, width, height) {\r\n        if (width === void 0) { width = 0; }\r\n        if (height === void 0) { height = 0; }\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n    /**\r\n     * Returns a new document-space rectangle from the viewport's bounds.\r\n     */\r\n    Rect.fromScreen = function () {\r\n        return new Rect(window.scrollX, window.scrollY, window.innerWidth, window.innerHeight);\r\n    };\r\n    /**\r\n     * Returns a new document-space rectangle from the specified element.\r\n     */\r\n    Rect.fromElement = function (element) {\r\n        var r = element.getBoundingClientRect();\r\n        return new Rect(window.scrollX + r.x, window.scrollY + r.y, r.width, r.height);\r\n    };\r\n    Rect.zero = new Rect(0, 0);\r\n    return Rect;\r\n}());\r\nexports.Rect = Rect;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Spline = void 0;\r\nvar math_1 = require(\"../systems/math\");\r\n/**\r\n * Represents a spline that can be used to continueously evaluate a function\r\n * between keys. The base implementation is kept generic, so the functionality\r\n * can easily be implemented for similar constructs, such as gradients.\r\n */\r\nvar Spline = /** @class */ (function () {\r\n    /**\r\n     * Creates a new spline instance, using the specified keys.\r\n     * Note that you have to pass at least one key.\r\n     */\r\n    function Spline() {\r\n        var keys = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            keys[_i] = arguments[_i];\r\n        }\r\n        if (keys.length === 0) {\r\n            throw new Error(\"Splines require at least one key.\");\r\n        }\r\n        if (Array.isArray(keys[0])) {\r\n            throw new Error(\"You are trying to pass an array to the spline constructor, which is not supported. \" +\r\n                \"Try to spread the array into the constructor instead.\");\r\n        }\r\n        this.keys = keys;\r\n    }\r\n    /**\r\n     * Evaluates the spline at the given time.\r\n     */\r\n    Spline.prototype.evaluate = function (time) {\r\n        if (this.keys.length === 0) {\r\n            throw new Error(\"Attempt to evaluate a spline with no keys.\");\r\n        }\r\n        if (this.keys.length === 1) {\r\n            // The spline only contains one key, therefore is constant.\r\n            return this.keys[0].value;\r\n        }\r\n        // Sort the keys and figure out the first key above the passed time.\r\n        var ascendingKeys = this.keys.sort(function (a, b) { return a.time - b.time; });\r\n        var upperKeyIndex = ascendingKeys.findIndex(function (g) { return g.time > time; });\r\n        // If the found index is either 0 or -1, the specified time falls out\r\n        // of the range of the supplied keys. In that case, the value of the\r\n        // nearest applicant key is returned.\r\n        if (upperKeyIndex === 0) {\r\n            return ascendingKeys[0].value;\r\n        }\r\n        if (upperKeyIndex === -1) {\r\n            return ascendingKeys[ascendingKeys.length - 1].value;\r\n        }\r\n        // Otherwise, find the bounding keys, and extrapolate the time between\r\n        // the two. This is then used to interpolate between the two keys,\r\n        // using the provided implementation.\r\n        var lowerKey = ascendingKeys[upperKeyIndex - 1];\r\n        var upperKey = ascendingKeys[upperKeyIndex];\r\n        var containedTime = math_1.invlerp(lowerKey.time, upperKey.time, time);\r\n        return this.interpolate(lowerKey.value, upperKey.value, containedTime);\r\n    };\r\n    return Spline;\r\n}());\r\nexports.Spline = Spline;\r\n","\"use strict\";\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Vector = void 0;\r\nvar math_1 = require(\"../systems/math\");\r\n/**\r\n * Represents a structure used to process vectors.\r\n *\r\n * @remarks\r\n * Note that the operations in this class will **not** modify the original vector,\r\n * except for the property assignments. This is to ensure that vectors are not\r\n * unintentionally modified.\r\n *\r\n * @example\r\n * ```ts\r\n * const vectorA = new Vector(1, 3, 5);\r\n * const vectorB = new Vector(2, 3, 1);\r\n * const vectorC = vectorA.add(vectorB); // (3, 6, 6)\r\n * ```\r\n */\r\nvar Vector = /** @class */ (function () {\r\n    /**\r\n     * Creates a new vector with optional x-, y-, and z-components.\r\n     * Omitted components are defaulted to 0.\r\n     */\r\n    function Vector(x, y, z) {\r\n        if (x === void 0) { x = 0; }\r\n        if (y === void 0) { y = 0; }\r\n        if (z === void 0) { z = 0; }\r\n        this.values = new Float32Array(3);\r\n        this.xyz = [x, y, z];\r\n    }\r\n    Object.defineProperty(Vector.prototype, \"x\", {\r\n        /**\r\n         * Returns the x-component of the vector.\r\n         */\r\n        get: function () {\r\n            return this.values[0];\r\n        },\r\n        /**\r\n         * Modifies the x-component of the vector.\r\n         */\r\n        set: function (value) {\r\n            this.values[0] = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Vector.prototype, \"y\", {\r\n        /**\r\n         * Returns the y-component of the vector.\r\n         */\r\n        get: function () {\r\n            return this.values[1];\r\n        },\r\n        /**\r\n         * Modifies the y-component of the vector.\r\n         */\r\n        set: function (value) {\r\n            this.values[1] = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Vector.prototype, \"z\", {\r\n        /**\r\n         * Returns the z-component of the vector.\r\n         */\r\n        get: function () {\r\n            return this.values[2];\r\n        },\r\n        /**\r\n         * Modifies the z-component of the vector.\r\n         */\r\n        set: function (value) {\r\n            this.values[2] = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Vector.prototype, \"xyz\", {\r\n        /**\r\n         * Returns the xyz-components of the vector, bundled as a copied array.\r\n         */\r\n        get: function () {\r\n            return [this.x, this.y, this.z];\r\n        },\r\n        /**\r\n         * Simultaneously updates the xyz-components of the vector, by passing an array.\r\n         */\r\n        set: function (values) {\r\n            this.values[0] = values[0];\r\n            this.values[1] = values[1];\r\n            this.values[2] = values[2];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns the length of the vector.\r\n     */\r\n    Vector.prototype.magnitude = function () {\r\n        return Math.sqrt(this.sqrMagnitude());\r\n    };\r\n    /**\r\n     * Returns the squared length of the vector.\r\n     */\r\n    Vector.prototype.sqrMagnitude = function () {\r\n        return this.x * this.x + this.y * this.y + this.z * this.z;\r\n    };\r\n    /**\r\n     * Adds the two vectors together, component-wise.\r\n     */\r\n    Vector.prototype.add = function (vector) {\r\n        return new Vector(this.x + vector.x, this.y + vector.y, this.z + vector.z);\r\n    };\r\n    /**\r\n     * Subtracts the right vector from the left one, component-wise.\r\n     */\r\n    Vector.prototype.subtract = function (vector) {\r\n        return new Vector(this.x - vector.x, this.y - vector.y, this.z - vector.z);\r\n    };\r\n    /**\r\n     * Scales the lefthand vector by another vector or by a number.\r\n     */\r\n    Vector.prototype.scale = function (scalar) {\r\n        if (typeof scalar === \"number\") {\r\n            return new Vector(this.x * scalar, this.y * scalar, this.z * scalar);\r\n        }\r\n        else {\r\n            return new Vector(this.x * scalar.x, this.y * scalar.y, this.z * scalar.z);\r\n        }\r\n    };\r\n    /**\r\n     * Normalizes the vector to a length of 1. If the length was previously zero,\r\n     * then a zero-length vector will be returned.\r\n     */\r\n    Vector.prototype.normalized = function () {\r\n        var magnitude = this.magnitude();\r\n        if (magnitude !== 0) {\r\n            return this.scale(1 / magnitude);\r\n        }\r\n        return new (Vector.bind.apply(Vector, __spreadArray([void 0], this.xyz)))();\r\n    };\r\n    /**\r\n     * Returns the angle between two vectors, in degrees.\r\n     */\r\n    Vector.prototype.angle = function (vector) {\r\n        return (math_1.rad2deg *\r\n            Math.acos((this.x * vector.x + this.y * vector.y + this.z * vector.z) /\r\n                (this.magnitude() * vector.magnitude())));\r\n    };\r\n    /**\r\n     * Returns the cross-product of two vectors.\r\n     */\r\n    Vector.prototype.cross = function (vector) {\r\n        return new Vector(this.y * vector.z - this.z * vector.y, this.z * vector.x - this.x * vector.z, this.x * vector.y - this.y * vector.x);\r\n    };\r\n    /**\r\n     * returns the dot-product of two vectors.\r\n     */\r\n    Vector.prototype.dot = function (vector) {\r\n        return (this.magnitude() *\r\n            vector.magnitude() *\r\n            Math.cos(math_1.deg2rad * this.angle(vector)));\r\n    };\r\n    /**\r\n     * Returns a formatted representation of the vector.\r\n     */\r\n    Vector.prototype.toString = function () {\r\n        return \"Vector(\" + this.values.join(\", \") + \")\";\r\n    };\r\n    /**\r\n     * Creates a new vector from an angle, in degrees. Note that the z-component will be zero.\r\n     */\r\n    Vector.from2dAngle = function (angle) {\r\n        return new Vector(Math.cos(angle * math_1.deg2rad), Math.sin(angle * math_1.deg2rad));\r\n    };\r\n    /**\r\n     * Returns (0, 0, 0).\r\n     */\r\n    Vector.zero = new Vector(0, 0, 0);\r\n    /**\r\n     * Returns (1, 1, 1).\r\n     */\r\n    Vector.one = new Vector(1, 1, 1);\r\n    /**\r\n     * Returns (1, 0, 0).\r\n     */\r\n    Vector.right = new Vector(1, 0, 0);\r\n    /**\r\n     * Returns (0, 1, 0).\r\n     */\r\n    Vector.up = new Vector(0, 1, 0);\r\n    /**\r\n     * Returns (0, 0, 1).\r\n     */\r\n    Vector.forward = new Vector(0, 0, 1);\r\n    return Vector;\r\n}());\r\nexports.Vector = Vector;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.particleContainer = exports.debugContainer = exports.rootContainer = void 0;\r\nvar settings_1 = require(\"./settings\");\r\nvar util_1 = require(\"./util\");\r\n/**\r\n * The prefix to apply to the containers.\r\n */\r\nvar containerPrefix = \"party-js-\";\r\n/**\r\n * Checks if the specified container is 'active', meaning not undefined and attached to the DOM.\r\n */\r\nfunction isContainerActive(container) {\r\n    return container && container.isConnected;\r\n}\r\n/**\r\n * A generic factory method for creating a DOM container. Prefixes the specified name with the\r\n * container prefix, applies the styles and adds it under the parent.\r\n */\r\nfunction makeContainer(name, styles, parent) {\r\n    var container = document.createElement(\"div\");\r\n    container.id = containerPrefix + name;\r\n    Object.assign(container.style, styles);\r\n    return parent.appendChild(container);\r\n}\r\n/**\r\n * Represents the root container for DOM elements of the library.\r\n */\r\nexports.rootContainer = new util_1.Lazy(function () {\r\n    return makeContainer(\"container\", {\r\n        position: \"fixed\",\r\n        left: \"0\",\r\n        top: \"0\",\r\n        height: \"100vh\",\r\n        width: \"100vw\",\r\n        pointerEvents: \"none\",\r\n        userSelect: \"none\",\r\n        zIndex: settings_1.settings.zIndex.toString(),\r\n    }, document.body);\r\n}, isContainerActive);\r\n/**\r\n * Represents the debugging container of the library, only active if debugging is enabled.\r\n */\r\nexports.debugContainer = new util_1.Lazy(function () {\r\n    return makeContainer(\"debug\", {\r\n        position: \"absolute\",\r\n        top: \"0\",\r\n        left: \"0\",\r\n        margin: \"0.5em\",\r\n        padding: \"0.5em 1em\",\r\n        border: \"2px solid rgb(0, 0, 0, 0.2)\",\r\n        background: \"rgb(0, 0, 0, 0.1)\",\r\n        color: \"#555\",\r\n        fontFamily: \"monospace\",\r\n    }, exports.rootContainer.current);\r\n}, isContainerActive);\r\n/**\r\n * Represents the particle container of the library.\r\n * This is where the particle DOM elements get rendered into.\r\n */\r\nexports.particleContainer = new util_1.Lazy(function () {\r\n    return makeContainer(\"particles\", {\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        overflow: \"hidden\",\r\n        perspective: \"1200px\",\r\n    }, exports.rootContainer.current);\r\n}, isContainerActive);\r\n","\"use strict\";\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Debug = void 0;\r\nvar containers_1 = require(\"./containers\");\r\nvar settings_1 = require(\"./settings\");\r\n/**\r\n * Represents a utility module to view debug information inside the DOM.\r\n * This is disabled by default and needs to manually be enabled by setting\r\n * the '.enabled' field to true.\r\n *\r\n * While disabled, the utility will not fetch stats and update itself.\r\n */\r\nvar Debug = /** @class */ (function () {\r\n    /**\r\n     * Registers a new debug utility that is attached to the given scene.\r\n     *\r\n     * @param scene The scene to attach to.\r\n     */\r\n    function Debug(scene) {\r\n        this.scene = scene;\r\n        /**\r\n         * The rate at which the debug interface should refresh itself (per second).\r\n         */\r\n        this.refreshRate = 8;\r\n        /**\r\n         * The timer counting down to refreshes.\r\n         */\r\n        this.refreshTimer = 1 / this.refreshRate;\r\n    }\r\n    /**\r\n     * Processes a tick event in the interface. This checks if enough has passed to\r\n     * trigger a refresh, and if so, fetches the debug information and updates the DOM.\r\n     *\r\n     * @param delta The time that has elapsed since the last tick.\r\n     */\r\n    Debug.prototype.tick = function (delta) {\r\n        var container = containers_1.debugContainer.current;\r\n        // If the current display style does not match the style inferred from the\r\n        // enabled-state, update it.\r\n        var displayStyle = settings_1.settings.debug ? \"block\" : \"none\";\r\n        if (container.style.display !== displayStyle) {\r\n            container.style.display = displayStyle;\r\n        }\r\n        if (!settings_1.settings.debug) {\r\n            // If the interface is not enabled, don't fetch or update any infos.\r\n            return;\r\n        }\r\n        this.refreshTimer += delta;\r\n        if (this.refreshTimer > 1 / this.refreshRate) {\r\n            this.refreshTimer = 0;\r\n            // Update the container with the fetched information joined on line breaks.\r\n            container.innerHTML = this.getDebugInformation(delta).join(\"<br>\");\r\n        }\r\n    };\r\n    /**\r\n     * Fetches the debug information from the specified delta and the linked scene.\r\n     *\r\n     * @returns An array of debugging information, formatted as HTML.\r\n     */\r\n    Debug.prototype.getDebugInformation = function (delta) {\r\n        // Count emitters and particles.\r\n        var emitters = this.scene.emitters.length;\r\n        var particles = this.scene.emitters.reduce(function (acc, cur) { return acc + cur.particles.length; }, 0);\r\n        var infos = [\r\n            \"<b>party.js Debug</b>\",\r\n            \"--------------\",\r\n            \"FPS: \" + Math.round(1 / delta),\r\n            \"Emitters: \" + emitters,\r\n            \"Particles: \" + particles,\r\n        ];\r\n        // Emitter informations are formatted using their index, internal timer\r\n        // and total particle count.\r\n        var emitterInfos = this.scene.emitters.map(function (emitter) {\r\n            return [\r\n                // Show the current loop and the total loops.\r\n                \"\\u2B6F: \" + (emitter[\"currentLoop\"] + 1) + \"/\" + (emitter.options.loops >= 0 ? emitter.options.loops : \"\"),\r\n                // Show the amount of particle contained.\r\n                \"\\u03A3p: \" + emitter.particles.length,\r\n                // Show the internal timer.\r\n                !emitter.isExpired\r\n                    ? \"\\u03A3t: \" + emitter[\"durationTimer\"].toFixed(3) + \"s\"\r\n                    : \"<i>expired</i>\",\r\n            ].join(\", \");\r\n        });\r\n        infos.push.apply(infos, __spreadArray([\"--------------\"], emitterInfos));\r\n        return infos;\r\n    };\r\n    return Debug;\r\n}());\r\nexports.Debug = Debug;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.default = exports.forceInit = exports.util = exports.math = exports.random = exports.sources = exports.variation = exports.Emitter = exports.Particle = exports.settings = exports.scene = void 0;\r\nvar scene_1 = require(\"./scene\");\r\nvar util_1 = require(\"./util\");\r\n__exportStar(require(\"./components\"), exports);\r\n__exportStar(require(\"./templates\"), exports);\r\n__exportStar(require(\"./systems/shapes\"), exports);\r\n__exportStar(require(\"./systems/modules\"), exports);\r\n// Create the lazy-initializing scene.\r\nexports.scene = new util_1.Lazy(function () {\r\n    // The library requires the use of the DOM, hence it cannot run in non-browser environments.\r\n    if (typeof document === \"undefined\" || typeof window === \"undefined\") {\r\n        throw new Error(\"It seems like you are trying to run party.js in a non-browser-like environment, which is not supported.\");\r\n    }\r\n    return new scene_1.Scene();\r\n});\r\nvar settings_1 = require(\"./settings\");\r\nObject.defineProperty(exports, \"settings\", { enumerable: true, get: function () { return settings_1.settings; } });\r\nvar particle_1 = require(\"./particles/particle\");\r\nObject.defineProperty(exports, \"Particle\", { enumerable: true, get: function () { return particle_1.Particle; } });\r\nvar emitter_1 = require(\"./particles/emitter\");\r\nObject.defineProperty(exports, \"Emitter\", { enumerable: true, get: function () { return emitter_1.Emitter; } });\r\nexports.variation = require(\"./systems/variation\");\r\nexports.sources = require(\"./systems/sources\");\r\nexports.random = require(\"./systems/random\");\r\nexports.math = require(\"./systems/math\");\r\nexports.util = require(\"./util\");\r\n/**\r\n * Forces the initialization of the otherwise lazy scene.\r\n */\r\nfunction forceInit() {\r\n    exports.scene.current;\r\n}\r\nexports.forceInit = forceInit;\r\nexports.default = require(\"./\");\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Emitter = void 0;\r\nvar vector_1 = require(\"../components/vector\");\r\nvar settings_1 = require(\"../settings\");\r\nvar variation_1 = require(\"../systems/variation\");\r\nvar config_1 = require(\"../util/config\");\r\nvar options_1 = require(\"./options\");\r\nvar particle_1 = require(\"./particle\");\r\n/**\r\n * Represents an emitter that is responsible for spawning and updating particles.\r\n *\r\n * Particles themselves are just data-holders, with the system acting upon them and\r\n * modifying them. The modifications are done mainly via modules, that use the\r\n * particle's data together with some function to apply temporal transitions.\r\n *\r\n * @see Particle\r\n * @see ParticleModifierModule\r\n */\r\nvar Emitter = /** @class */ (function () {\r\n    /**\r\n     * Creates a new emitter, using default options.\r\n     */\r\n    function Emitter(options) {\r\n        /**\r\n         * The particles currently contained within the system.\r\n         */\r\n        this.particles = [];\r\n        this.currentLoop = 0; // The current loop index.\r\n        this.durationTimer = 0; // Measures the current runtime duration, to allow loops to reset.\r\n        this.emissionTimer = 0; // Measures the current emission timer, to allow spawning particles in intervals.\r\n        this.attemptedBurstIndices = []; // The indices of the particle bursts that were attempted this loop.\r\n        this.options = config_1.overrideDefaults(options_1.getDefaultEmitterOptions(), options === null || options === void 0 ? void 0 : options.emitterOptions);\r\n        this.emission = config_1.overrideDefaults(options_1.getDefaultEmissionOptions(), options === null || options === void 0 ? void 0 : options.emissionOptions);\r\n        this.renderer = config_1.overrideDefaults(options_1.getDefaultRendererOptions(), options === null || options === void 0 ? void 0 : options.rendererOptions);\r\n    }\r\n    Object.defineProperty(Emitter.prototype, \"isExpired\", {\r\n        /**\r\n         * Checks if the emitter is already expired and can be removed.\r\n         * Expired emitters do not emit new particles.\r\n         */\r\n        get: function () {\r\n            return (this.options.loops >= 0 && this.currentLoop >= this.options.loops);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Emitter.prototype, \"canRemove\", {\r\n        /**\r\n         * Checks if the emitter can safely be removed.\r\n         * This is true if no more particles are active.\r\n         */\r\n        get: function () {\r\n            return this.particles.length === 0;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Clears all particles inside the emitter.\r\n     *\r\n     * @returns The number of cleared particles.\r\n     */\r\n    Emitter.prototype.clearParticles = function () {\r\n        return this.particles.splice(0).length;\r\n    };\r\n    /**\r\n     * Processes a tick of the emitter, using the elapsed time.\r\n     *\r\n     * @remarks\r\n     * This handles a few things, namely:\r\n     * - Incrementing the duration timer and potentially incrementing the loop.\r\n     * - Handling particle bursts & emissions.\r\n     * - Despawning particles conditionally.\r\n     *\r\n     * @param delta The time, in seconds, passed since the last tick.\r\n     */\r\n    Emitter.prototype.tick = function (delta) {\r\n        if (!this.isExpired) {\r\n            this.durationTimer += delta;\r\n            if (this.durationTimer >= this.options.duration) {\r\n                this.currentLoop++;\r\n                // To start a new loop, the duration timer and attempted bursts are reset.\r\n                this.durationTimer = 0;\r\n                this.attemptedBurstIndices = [];\r\n            }\r\n            // We need to check the expiry again, in case the added loop or duration changed something.\r\n            if (!this.isExpired) {\r\n                // Iterate over the bursts, attempting to execute them if the time is ready.\r\n                var burstIndex = 0;\r\n                for (var _i = 0, _a = this.emission.bursts; _i < _a.length; _i++) {\r\n                    var burst = _a[_i];\r\n                    if (burst.time <= this.durationTimer) {\r\n                        // Has the burst already been attempted? If not ...\r\n                        if (!this.attemptedBurstIndices.includes(burstIndex)) {\r\n                            // Perform the burst, emitting a variable amount of particles.\r\n                            var count = variation_1.evaluateVariation(burst.count);\r\n                            for (var i = 0; i < count; i++) {\r\n                                this.emitParticle();\r\n                            }\r\n                            // Mark the burst as attempted.\r\n                            this.attemptedBurstIndices.push(burstIndex);\r\n                        }\r\n                    }\r\n                    burstIndex++;\r\n                }\r\n                // Handle the 'emission over time'. By using a while-loop instead of a simple\r\n                // if-condition, we take high deltas into account, and ensure that the correct\r\n                // number of particles will consistently be emitted.\r\n                this.emissionTimer += delta;\r\n                var delay = 1 / this.emission.rate;\r\n                while (this.emissionTimer > delay) {\r\n                    this.emissionTimer -= delay;\r\n                    this.emitParticle();\r\n                }\r\n            }\r\n        }\r\n        var _loop_1 = function (i) {\r\n            var particle = this_1.particles[i];\r\n            this_1.tickParticle(particle, delta);\r\n            // Particles should be despawned (i.e. removed from the collection) if any of\r\n            // the despawning rules apply to them.\r\n            if (this_1.options.despawningRules.some(function (rule) { return rule(particle); })) {\r\n                this_1.particles.splice(i, 1);\r\n            }\r\n        };\r\n        var this_1 = this;\r\n        for (var i = this.particles.length - 1; i >= 0; i--) {\r\n            _loop_1(i);\r\n        }\r\n    };\r\n    /**\r\n     * Performs an internal tick for the particle.\r\n     *\r\n     * @remarks\r\n     * This method controls the particle's lifetime, location and velocity, according\r\n     * to the elapsed delta and the configuration. Additionally, each of the emitter's\r\n     * modules is applied to the particle.\r\n     *\r\n     * @param particle The particle to apply the tick for.\r\n     * @param delta The time, in seconds, passed since the last tick.\r\n     */\r\n    Emitter.prototype.tickParticle = function (particle, delta) {\r\n        particle.lifetime -= delta;\r\n        if (this.options.useGravity) {\r\n            // Apply gravitational acceleration to the particle.\r\n            particle.velocity = particle.velocity.add(vector_1.Vector.up.scale(settings_1.settings.gravity * delta));\r\n        }\r\n        // Apply the particle's velocity to its location.\r\n        particle.location = particle.location.add(particle.velocity.scale(delta));\r\n        // Apply the modules to the particle.\r\n        for (var _i = 0, _a = this.options.modules; _i < _a.length; _i++) {\r\n            var moduleFunction = _a[_i];\r\n            moduleFunction(particle);\r\n        }\r\n    };\r\n    /**\r\n     * Emits a particle using the registered settings.\r\n     * Also may despawn a particle if the maximum number of particles is exceeded.\r\n     */\r\n    Emitter.prototype.emitParticle = function () {\r\n        var particle = new particle_1.Particle({\r\n            location: this.emission.sourceSampler(),\r\n            lifetime: variation_1.evaluateVariation(this.emission.initialLifetime),\r\n            velocity: vector_1.Vector.from2dAngle(variation_1.evaluateVariation(this.emission.angle)).scale(variation_1.evaluateVariation(this.emission.initialSpeed)),\r\n            size: variation_1.evaluateVariation(this.emission.initialSize),\r\n            rotation: variation_1.evaluateVariation(this.emission.initialRotation),\r\n            color: variation_1.evaluateVariation(this.emission.initialColor),\r\n        });\r\n        this.particles.push(particle);\r\n        // Ensure that no more particles than 'maxParticles' can exist.\r\n        if (this.particles.length > this.options.maxParticles) {\r\n            this.particles.shift();\r\n        }\r\n        return particle;\r\n    };\r\n    return Emitter;\r\n}());\r\nexports.Emitter = Emitter;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getDefaultEmissionOptions = void 0;\r\nvar components_1 = require(\"../../components\");\r\nvar sources_1 = require(\"../../systems/sources\");\r\n/**\r\n * Returns the default set of emission options.\r\n */\r\nfunction getDefaultEmissionOptions() {\r\n    return {\r\n        rate: 10,\r\n        angle: 0,\r\n        bursts: [],\r\n        sourceSampler: sources_1.rectSource(components_1.Rect.zero),\r\n        initialLifetime: 5,\r\n        initialSpeed: 5,\r\n        initialSize: 1,\r\n        initialRotation: components_1.Vector.zero,\r\n        initialColor: components_1.Color.white,\r\n    };\r\n}\r\nexports.getDefaultEmissionOptions = getDefaultEmissionOptions;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getDefaultEmitterOptions = void 0;\r\nvar rules_1 = require(\"../../util/rules\");\r\n/**\r\n * Returns the default set of emitter options.\r\n */\r\nfunction getDefaultEmitterOptions() {\r\n    return {\r\n        duration: 5,\r\n        loops: 1,\r\n        useGravity: true,\r\n        maxParticles: 300,\r\n        despawningRules: [rules_1.despawningRules.lifetime, rules_1.despawningRules.bounds],\r\n        modules: [],\r\n    };\r\n}\r\nexports.getDefaultEmitterOptions = getDefaultEmitterOptions;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./emitterOptions\"), exports);\r\n__exportStar(require(\"./emissionOptions\"), exports);\r\n__exportStar(require(\"./renderOptions\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getDefaultRendererOptions = void 0;\r\n/**\r\n * Returns the default set of renderer options.\r\n */\r\nfunction getDefaultRendererOptions() {\r\n    return {\r\n        shapeFactory: \"square\",\r\n        applyColor: defaultApplyColor,\r\n        applyOpacity: defaultApplyOpacity,\r\n        applyLighting: defaultApplyLighting,\r\n        applyTransform: defaultApplyTransform,\r\n    };\r\n}\r\nexports.getDefaultRendererOptions = getDefaultRendererOptions;\r\n/**\r\n * Applies the specified color to the element.\r\n *\r\n * @remarks\r\n * This function is aware of the element's node type:\r\n * - `div` elements have their `background` set.\r\n * - `svg` elements have their `fill` and `color` set.\r\n * - Other elements have their `color` set.\r\n */\r\nfunction defaultApplyColor(color, element) {\r\n    var hex = color.toHex();\r\n    // Note that by default, HTML node names are uppercase.\r\n    switch (element.nodeName.toLowerCase()) {\r\n        case \"div\":\r\n            element.style.background = hex;\r\n            break;\r\n        case \"svg\":\r\n            element.style.fill = element.style.color = hex;\r\n            break;\r\n        default:\r\n            element.style.color = hex;\r\n            break;\r\n    }\r\n}\r\n/**\r\n * Applies the specified opacity to the element.\r\n */\r\nfunction defaultApplyOpacity(opacity, element) {\r\n    element.style.opacity = opacity.toString();\r\n}\r\n/**\r\n * Applies the specified lighting to the element as a brightness filter.\r\n *\r\n * @remarks\r\n * This function assumes an ambient light with intensity 0.5, and that the\r\n * particle should be lit from both sides. The brightness filter can exceed 1,\r\n * to give the particles a \"glossy\" feel.\r\n */\r\nfunction defaultApplyLighting(lighting, element) {\r\n    element.style.filter = \"brightness(\" + (0.5 + Math.abs(lighting)) + \")\";\r\n}\r\n/**\r\n * Applies the specified transform to the element as a 3D CSS transform.\r\n * Also takes into account the current window scroll, to make sure that particles are\r\n * rendered inside of the fixed container.\r\n */\r\nfunction defaultApplyTransform(particle, element) {\r\n    element.style.transform =\r\n        // Make sure to take window scrolling into account.\r\n        \"translateX(\" + (particle.location.x - window.scrollX).toFixed(3) + \"px) \" +\r\n            (\"translateY(\" + (particle.location.y - window.scrollY).toFixed(3) + \"px) \") +\r\n            (\"translateZ(\" + particle.location.z.toFixed(3) + \"px) \") +\r\n            (\"rotateX(\" + particle.rotation.x.toFixed(3) + \"deg) \") +\r\n            (\"rotateY(\" + particle.rotation.y.toFixed(3) + \"deg) \") +\r\n            (\"rotateZ(\" + particle.rotation.z.toFixed(3) + \"deg) \") +\r\n            (\"scale(\" + particle.size.toFixed(3) + \")\");\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Particle = void 0;\r\nvar components_1 = require(\"../components\");\r\nvar config_1 = require(\"../util/config\");\r\n/**\r\n * Represents an emitted particle.\r\n */\r\nvar Particle = /** @class */ (function () {\r\n    /**\r\n     * Creates a new particle instance through the specified options.\r\n     */\r\n    function Particle(options) {\r\n        var populatedOptions = config_1.overrideDefaults({\r\n            lifetime: 0,\r\n            size: 1,\r\n            location: components_1.Vector.zero,\r\n            rotation: components_1.Vector.zero,\r\n            velocity: components_1.Vector.zero,\r\n            color: components_1.Color.white,\r\n            opacity: 1,\r\n        }, options);\r\n        // Generate a symbolic ID.\r\n        this.id = Symbol();\r\n        // Assign various properties, together with some initials for later reference.\r\n        this.size = this.initialSize = populatedOptions.size;\r\n        this.lifetime = this.initialLifetime = populatedOptions.lifetime;\r\n        this.rotation = this.initialRotation = populatedOptions.rotation;\r\n        this.location = populatedOptions.location;\r\n        this.velocity = populatedOptions.velocity;\r\n        this.color = populatedOptions.color;\r\n        this.opacity = populatedOptions.opacity;\r\n    }\r\n    return Particle;\r\n}());\r\nexports.Particle = Particle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Renderer = void 0;\r\nvar __1 = require(\"..\");\r\nvar vector_1 = require(\"../components/vector\");\r\nvar containers_1 = require(\"../containers\");\r\nvar shapes_1 = require(\"../systems/shapes\");\r\nvar util_1 = require(\"../util\");\r\n/**\r\n * Represents a renderer used to draw particles to the DOM via HTML\r\n * elements. Additionally, it is responsible for purging the elements\r\n * of destroyed particles from the DOM.\r\n */\r\nvar Renderer = /** @class */ (function () {\r\n    function Renderer() {\r\n        /**\r\n         * The lookup of elements currently handled by the renderer, with the\r\n         * particle ID as key and a HTMLElement as the value.\r\n         */\r\n        this.elements = new Map();\r\n        /**\r\n         * The normalized direction the light comes from.\r\n         */\r\n        this.light = new vector_1.Vector(0, 0, 1);\r\n        /**\r\n         * Whether or not the renderer should actually draw particles.\r\n         */\r\n        this.enabled = true;\r\n        // Respect that users might prefer reduced motion.\r\n        // See: https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-motion\r\n        this.enabled =\r\n            !__1.settings.respectReducedMotion ||\r\n                !window.matchMedia(\"(prefers-reduced-motion)\").matches;\r\n    }\r\n    /**\r\n     * Begins a new render block. During the rendering phase, a list of rendered particles\r\n     * is tracked, so that stale particles can be removed later.\r\n     */\r\n    Renderer.prototype.begin = function () {\r\n        this.renderedParticles = [];\r\n    };\r\n    /**\r\n     * Terminates an existing render block. This checks which particles were rendered\r\n     * during the block and purges all unused HTMLElements from the DOM.\r\n     *\r\n     * @returns The amount of particles that were rendered.\r\n     */\r\n    Renderer.prototype.end = function () {\r\n        var it = this.elements.keys();\r\n        var result = it.next();\r\n        while (!result.done) {\r\n            var id = result.value;\r\n            if (!this.renderedParticles.includes(id)) {\r\n                this.elements.get(id).remove();\r\n                this.elements.delete(id);\r\n            }\r\n            result = it.next();\r\n        }\r\n        return this.renderedParticles.length;\r\n    };\r\n    /**\r\n     * Renders an individual particle to the DOM. If the particle is rendered for the first\r\n     * time, a HTMLElement will be created using the emitter's render settings.\r\n     *\r\n     * @param particle The particle to be rendered.\r\n     * @param emitter The system containing the particle.\r\n     */\r\n    Renderer.prototype.renderParticle = function (particle, emitter) {\r\n        if (!this.enabled)\r\n            return;\r\n        var options = emitter.renderer;\r\n        // Ensure that an element for the particle exists.\r\n        var element = this.elements.has(particle.id)\r\n            ? this.elements.get(particle.id)\r\n            : this.createParticleElement(particle, options);\r\n        if (options.applyColor) {\r\n            // If the options offer a coloring method, apply it.\r\n            options.applyColor(particle.color, element);\r\n        }\r\n        if (options.applyOpacity) {\r\n            // If the options offer an opacity modifying method, apply it.\r\n            options.applyOpacity(particle.opacity, element);\r\n        }\r\n        if (options.applyLighting) {\r\n            // If the options offer a lighting method, apply it.\r\n            // Lighting is calculated as a combination of the particle's normal\r\n            // direction and the lighting direction.\r\n            var normal = util_1.rotationToNormal(particle.rotation);\r\n            var lightingCoefficient = normal.dot(this.light);\r\n            options.applyLighting(lightingCoefficient, element);\r\n        }\r\n        if (options.applyTransform) {\r\n            // If the options offer a transformation method, apply it.\r\n            // This ensures the particle is rendered at the correct position with the correct rotation.\r\n            options.applyTransform(particle, element);\r\n        }\r\n        // Mark the particle as rendered.\r\n        this.renderedParticles.push(particle.id);\r\n    };\r\n    /**\r\n     * Creates the HTMLElement for a particle that does not have one already.\r\n     */\r\n    Renderer.prototype.createParticleElement = function (particle, options) {\r\n        // Resolve the element returned from the factory.\r\n        var resolved = shapes_1.resolveShapeFactory(options.shapeFactory);\r\n        // Clone the node to ensure we do not break existing elements.\r\n        var element = resolved.cloneNode(true);\r\n        // Ensure that the elements can be \"stacked\" ontop of eachother.\r\n        element.style.position = \"absolute\";\r\n        // Register the new element in the map, while appending the new element to the DOM.\r\n        this.elements.set(particle.id, containers_1.particleContainer.current.appendChild(element));\r\n        return element;\r\n    };\r\n    return Renderer;\r\n}());\r\nexports.Renderer = Renderer;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Scene = void 0;\r\nvar debug_1 = require(\"./debug\");\r\nvar emitter_1 = require(\"./particles/emitter\");\r\nvar renderer_1 = require(\"./particles/renderer\");\r\n/**\r\n * Represents a scene that contains emitters and their particles.\r\n *\r\n * Scenes are responsible for spawning and updating emitters, and\r\n * removing them once they are done.\r\n *\r\n * Scenes are not explicitely present in the DOM as an element, only\r\n * the contained particles are.\r\n */\r\nvar Scene = /** @class */ (function () {\r\n    /**\r\n     * Initializes a new scene and starts the ticking job.\r\n     */\r\n    function Scene() {\r\n        /**\r\n         * The emitters currently present in the scene.\r\n         */\r\n        this.emitters = [];\r\n        /**\r\n         * The debug instance associated with the scene.\r\n         */\r\n        this.debug = new debug_1.Debug(this);\r\n        /**\r\n         * The renderer associated with the scene.\r\n         */\r\n        this.renderer = new renderer_1.Renderer();\r\n        /**\r\n         * The ID of the currently scheduled tick.\r\n         */\r\n        this.scheduledTickId = undefined;\r\n        /**\r\n         * The timestamp of the last tick, used to calculate deltas.\r\n         *\r\n         * @initialValue `performance.now()` (time origin)\r\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMHighResTimeStamp\r\n         */\r\n        this.lastTickTimestamp = performance.now();\r\n        // Ensure the scene context is preserved on the tick.\r\n        this.tick = this.tick.bind(this);\r\n        this.scheduleTick();\r\n    }\r\n    /**\r\n     * Creates and returns a new, default emitter object.\r\n     */\r\n    Scene.prototype.createEmitter = function (options) {\r\n        var emitter = new emitter_1.Emitter(options);\r\n        this.emitters.push(emitter);\r\n        return emitter;\r\n    };\r\n    /**\r\n     * Clears all emitters from the scene.\r\n     *\r\n     * @returns The number of cleared emitters.\r\n     */\r\n    Scene.prototype.clearEmitters = function () {\r\n        return this.emitters.splice(0).length;\r\n    };\r\n    /**\r\n     * Clears the particles from all emitters in the scene.\r\n     * Note that this does not remove the actual emitter objects though.\r\n     *\r\n     * @returns The number of cleared particles.\r\n     */\r\n    Scene.prototype.clearParticles = function () {\r\n        return this.emitters.reduce(function (sum, emitter) { return sum + emitter.clearParticles(); }, 0);\r\n    };\r\n    /**\r\n     * Schedules a tick in the scene.\r\n     */\r\n    Scene.prototype.scheduleTick = function () {\r\n        this.scheduledTickId = window.requestAnimationFrame(this.tick);\r\n    };\r\n    /**\r\n     * Cancels a pending tick operation.\r\n     */\r\n    Scene.prototype.cancelTick = function () {\r\n        window.cancelAnimationFrame(this.scheduledTickId);\r\n    };\r\n    /**\r\n     * Processes a tick cycle, updating all emitters contained in the scene.\r\n     * This is handled as a JS animation frame event, hence the passed timestamp.\r\n     *\r\n     * @remarks\r\n     * The emitter ticking and particle rendering is run using try-catch blocks,\r\n     * to ensure that we can recover from potential errors.\r\n     *\r\n     * @param timestamp The current timestamp of the animation frame.\r\n     */\r\n    Scene.prototype.tick = function (timestamp) {\r\n        // Calculate the elapsed delta and convert it to seconds.\r\n        var delta = (timestamp - this.lastTickTimestamp) / 1000;\r\n        try {\r\n            // Perform ticks for all the emitters in the scene.\r\n            for (var i = 0; i < this.emitters.length; i++) {\r\n                var emitter = this.emitters[i];\r\n                emitter.tick(delta);\r\n                if (emitter.isExpired && emitter.canRemove) {\r\n                    this.emitters.splice(i--, 1);\r\n                }\r\n            }\r\n        }\r\n        catch (error) {\r\n            console.error(\"An error occurred while updating the scene's emitters:\\n\\\"\" + error + \"\\\"\");\r\n        }\r\n        try {\r\n            // Instruct the renderer to draw the particles of all systems.\r\n            this.renderer.begin();\r\n            for (var _i = 0, _a = this.emitters; _i < _a.length; _i++) {\r\n                var emitter = _a[_i];\r\n                for (var _b = 0, _c = emitter.particles; _b < _c.length; _b++) {\r\n                    var particle = _c[_b];\r\n                    this.renderer.renderParticle(particle, emitter);\r\n                }\r\n            }\r\n            this.renderer.end();\r\n        }\r\n        catch (error) {\r\n            console.error(\"An error occurred while rendering the scene's particles:\\n\\\"\" + error + \"\\\"\");\r\n        }\r\n        // Perform a tick on the debug interface\r\n        this.debug.tick(delta);\r\n        // Save the timestamp as the last tick timestamp and schedule a new tick.\r\n        this.lastTickTimestamp = timestamp;\r\n        this.scheduleTick();\r\n    };\r\n    return Scene;\r\n}());\r\nexports.Scene = Scene;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.settings = void 0;\r\nexports.settings = {\r\n    debug: false,\r\n    gravity: 800,\r\n    zIndex: 99999,\r\n    respectReducedMotion: true,\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.approximately = exports.clamp = exports.invlerp = exports.slerp = exports.lerp = exports.epsilon = exports.rad2deg = exports.deg2rad = void 0;\r\n/**\r\n * Constant coefficient to convert degrees to radians.\r\n */\r\nexports.deg2rad = Math.PI / 180;\r\n/**\r\n * Constant coefficient to convert radians to degrees.\r\n */\r\nexports.rad2deg = 180 / Math.PI;\r\n/**\r\n * A small value to approximately compare values.\r\n */\r\nexports.epsilon = 0.000001;\r\n/**\r\n * Linearly interpolates between a and b by t.\r\n */\r\nfunction lerp(a, b, t) {\r\n    return (1 - t) * a + t * b;\r\n}\r\nexports.lerp = lerp;\r\n/**\r\n * Smoothly interpolates between a and b by t (using cosine interpolation).\r\n */\r\nfunction slerp(a, b, t) {\r\n    return lerp(a, b, (1 - Math.cos(t * Math.PI)) / 2);\r\n}\r\nexports.slerp = slerp;\r\n/**\r\n * Inversely lerps v between a and b to find t.\r\n */\r\nfunction invlerp(a, b, v) {\r\n    return (v - a) / (b - a);\r\n}\r\nexports.invlerp = invlerp;\r\n/**\r\n * Clamps the specified value between a minimum and a maximum.\r\n */\r\nfunction clamp(value, min, max) {\r\n    return Math.min(max, Math.max(min, value));\r\n}\r\nexports.clamp = clamp;\r\n/**\r\n * Checks if a is approximately equal to b.\r\n */\r\nfunction approximately(a, b) {\r\n    return Math.abs(a - b) < exports.epsilon;\r\n}\r\nexports.approximately = approximately;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ModuleBuilder = void 0;\r\nvar components_1 = require(\"../components\");\r\n/**\r\n * Represents a builder for particle modules. Returns an evaluatable module\r\n * function, that can be consumed by emitters.\r\n *\r\n * @remarks\r\n * Not all properties can be driven. TypeScript will validate this at compile time,\r\n * but no internal validation is performed due to performance reasons. Also, note\r\n * that the driving factor is \"lifetime\" by default.\r\n *\r\n * @example\r\n * ```ts\r\n * new ModuleBuilder()\r\n *     .drive(\"size\")\r\n *     .by((t) => t * 2)\r\n *     .through(\"lifetime\")\r\n *     .build();\r\n * ```\r\n */\r\nvar ModuleBuilder = /** @class */ (function () {\r\n    function ModuleBuilder() {\r\n        /**\r\n         * The factor driving the built function.\r\n         *\r\n         * @defaultValue \"lifetime\"\r\n         */\r\n        this.factor = \"lifetime\";\r\n        this.isRelative = false;\r\n    }\r\n    /**\r\n     * Specifies the key in the particle that should be driven.\r\n     *\r\n     * @remarks\r\n     * Note that not all of a particle's properties are drivable through modules. If you\r\n     * need full control of a particle inside of a module, you can use a module function directly.\r\n     *\r\n     * @returns The chained builder instance.\r\n     */\r\n    ModuleBuilder.prototype.drive = function (key) {\r\n        this.driverKey = key;\r\n        return this;\r\n    };\r\n    /**\r\n     * Specifies the factor to drive the evaluated value by. Supports \"lifetime\" and \"size\".\r\n     *\r\n     * @returns The chained builder instance.\r\n     */\r\n    ModuleBuilder.prototype.through = function (factor) {\r\n        this.factor = factor;\r\n        return this;\r\n    };\r\n    /**\r\n     * Specifies the value to drive the module behaviour by. This can be a constant,\r\n     * a spline or an evaluable function. Note that in the last case, the driving\r\n     * factor is passed as a parameter.\r\n     *\r\n     * @returns The chained builder instance.\r\n     */\r\n    ModuleBuilder.prototype.by = function (driver) {\r\n        this.driverValue = driver;\r\n        return this;\r\n    };\r\n    /**\r\n     * Specifies that the module function is supposed to act relative to the\r\n     * properties initial value.\r\n     *\r\n     * @remarks\r\n     * Note that this is only possible if an \"initial*\" property exists on the\r\n     * particle object. The operation applied to the initial and new value\r\n     * is dependant on their type:\r\n     * - `Vector`: Both vectors are added.\r\n     * - `number`: Both numbers are multiplied.\r\n     *\r\n     * For more advanced relative customizations, consider using the particle\r\n     * object in the driver value function instead, like:\r\n     * ```ts\r\n     * .by((t, p) => p.initialSize + t * 2);\r\n     * ```\r\n     */\r\n    ModuleBuilder.prototype.relative = function (isRelative) {\r\n        if (isRelative === void 0) { isRelative = true; }\r\n        this.isRelative = isRelative;\r\n        return this;\r\n    };\r\n    /**\r\n     * Consumes the builder and returns an evaluatable module function.\r\n     *\r\n     * @remarks\r\n     * Note that you need to specify the driving key and value, otherwise an error\r\n     * will be thrown.\r\n     */\r\n    ModuleBuilder.prototype.build = function () {\r\n        var _this = this;\r\n        if (typeof this.driverKey === \"undefined\") {\r\n            throw new Error(\"No driving key was provided in the module builder. Did you forget a '.drive()' call?\");\r\n        }\r\n        if (typeof this.driverValue === \"undefined\") {\r\n            throw new Error(\"No driving value was provided in the module builder. Did you forget a '.through()' call?\");\r\n        }\r\n        return function (particle) {\r\n            updateDrivenProperty(particle, _this.driverKey, evaluateModuleDriver(_this.driverValue, calculateModuleFactor(_this.factor, particle), particle), _this.isRelative);\r\n        };\r\n    };\r\n    return ModuleBuilder;\r\n}());\r\nexports.ModuleBuilder = ModuleBuilder;\r\n/**\r\n * Evaluates the module driver using a specified factor.\r\n */\r\nfunction evaluateModuleDriver(driver, factor, particle) {\r\n    if (typeof driver === \"object\" && \"evaluate\" in driver) {\r\n        return driver.evaluate(factor);\r\n    }\r\n    if (typeof driver === \"function\") {\r\n        return driver(factor, particle);\r\n    }\r\n    return driver;\r\n}\r\n/**\r\n * Calculates a module factor using a specified particle as context.\r\n */\r\nfunction calculateModuleFactor(factor, particle) {\r\n    switch (factor) {\r\n        case \"lifetime\":\r\n            return particle.initialLifetime - particle.lifetime;\r\n        case \"relativeLifetime\":\r\n            return ((particle.initialLifetime - particle.lifetime) /\r\n                particle.initialLifetime);\r\n        case \"size\":\r\n            return particle.size;\r\n        default:\r\n            throw new Error(\"Invalid driving factor '\" + factor + \"'.\");\r\n    }\r\n}\r\n/**\r\n * Updates a driven property of a particle using the specified value.\r\n *\r\n * @remarks\r\n * If the operation is marked as relative, the function infers the new value\r\n * through the value's type. Note that relative properties must have a\r\n * corresponding \"initial*\" value in the particle's properties.\r\n */\r\nfunction updateDrivenProperty(particle, key, value, relative) {\r\n    if (relative === void 0) { relative = false; }\r\n    if (!relative) {\r\n        particle[key] = value;\r\n    }\r\n    else {\r\n        var initial = particle[\"initial\" + key[0].toUpperCase() + key.substr(1)];\r\n        if (typeof initial === \"undefined\") {\r\n            throw new Error(\"Unable to use relative chaining with key '\" + key + \"'; no initial value exists.\");\r\n        }\r\n        if (value instanceof components_1.Vector) {\r\n            updateDrivenProperty(particle, key, initial.add(value));\r\n        }\r\n        else if (typeof value === \"number\") {\r\n            updateDrivenProperty(particle, key, initial * value);\r\n        }\r\n        else {\r\n            throw new Error(\"Unable to use relative chaining with particle key '\" + key + \"'; no relative operation for '\" + value + \"' could be inferred.\");\r\n        }\r\n    }\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.randomInsideCircle = exports.randomInsideRect = exports.randomUnitVector = exports.pick = exports.randomRange = void 0;\r\nvar components_1 = require(\"../components\");\r\nvar math_1 = require(\"./math\");\r\n/**\r\n * Returns a random value from min to max.\r\n */\r\nfunction randomRange(min, max) {\r\n    if (min === void 0) { min = 0; }\r\n    if (max === void 0) { max = 1; }\r\n    return math_1.lerp(min, max, Math.random());\r\n}\r\nexports.randomRange = randomRange;\r\n/**\r\n * Picks a random element from the specified array. Returns undefined if the array is empty.\r\n */\r\nfunction pick(arr) {\r\n    return arr.length === 0\r\n        ? undefined\r\n        : arr[Math.floor(Math.random() * arr.length)];\r\n}\r\nexports.pick = pick;\r\n/**\r\n * Returns a random unit vector.\r\n */\r\nfunction randomUnitVector() {\r\n    var theta = randomRange(0, 2 * Math.PI);\r\n    var z = randomRange(-1, 1);\r\n    return new components_1.Vector(Math.sqrt(1 - z * z) * Math.cos(theta), Math.sqrt(1 - z * z) * Math.sin(theta), z);\r\n}\r\nexports.randomUnitVector = randomUnitVector;\r\n/**\r\n * Returns a random point inside the given rect.\r\n */\r\nfunction randomInsideRect(rect) {\r\n    return new components_1.Vector(rect.x + randomRange(0, rect.width), rect.y + randomRange(0, rect.height));\r\n}\r\nexports.randomInsideRect = randomInsideRect;\r\nfunction randomInsideCircle(circle) {\r\n    var theta = randomRange(0, 2 * Math.PI);\r\n    var radius = randomRange(0, circle.radius);\r\n    return new components_1.Vector(circle.x + Math.cos(theta) * radius, circle.y + Math.sin(theta) * radius);\r\n}\r\nexports.randomInsideCircle = randomInsideCircle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.resolveShapeFactory = exports.resolvableShapes = void 0;\r\nvar variation_1 = require(\"./variation\");\r\n/**\r\n * Represents the lookup that maps resolveable element keys to their HTML strings.\r\n *\r\n * @remarks\r\n * The default shapes are made to fit inside a dimension of 10x10 pixels, except\r\n * the 'star' shape, which exceeds it slightly.\r\n */\r\nexports.resolvableShapes = {\r\n    square: \"<div style=\\\"height: 10px; width: 10px;\\\"></div>\",\r\n    rectangle: \"<div style=\\\"height: 6px; width: 10px;\\\"></div>\",\r\n    circle: \"<svg viewBox=\\\"0 0 2 2\\\" width=\\\"10\\\" height=\\\"10\\\"><circle cx=\\\"1\\\" cy=\\\"1\\\" r=\\\"1\\\" fill=\\\"currentColor\\\"/></svg>\",\r\n    roundedSquare: \"<div style=\\\"height: 10px; width: 10px; border-radius: 3px;\\\"></div>\",\r\n    roundedRectangle: \"<div style=\\\"height: 6px; width: 10px; border-radius: 3px;\\\"></div>\",\r\n    star: \"<svg viewBox=\\\"0 0 512 512\\\" width=\\\"15\\\" height=\\\"15\\\"><polygon fill=\\\"currentColor\\\" points=\\\"512,197.816 325.961,185.585 255.898,9.569 185.835,185.585 0,197.816 142.534,318.842 95.762,502.431 255.898,401.21 416.035,502.431 369.263,318.842\\\"/></svg>\",\r\n};\r\n/**\r\n * Resolves the specified element factory using the resolvable elements, if needed.\r\n */\r\nfunction resolveShapeFactory(factory) {\r\n    // Retrieve the unresolved element from the factory.\r\n    var shape = variation_1.evaluateVariation(factory);\r\n    // If a string is returned, we need to resolve the element. This means\r\n    // looking up the string in the resolver lookup. If the key was not\r\n    // resolvable, we throw an error.\r\n    if (typeof shape === \"string\") {\r\n        var resolved = exports.resolvableShapes[shape];\r\n        if (!resolved) {\r\n            throw new Error(\"Failed to resolve shape key '\" + shape + \"'. Did you forget to add it to the 'resolvableShapes' lookup?\");\r\n        }\r\n        // We're in luck, we can resolve the element! We create a dummy <div> element\r\n        // to set the innerHTML of, and return the first element child.\r\n        var dummy = document.createElement(\"div\");\r\n        dummy.innerHTML = resolved;\r\n        return dummy.firstElementChild;\r\n    }\r\n    return shape;\r\n}\r\nexports.resolveShapeFactory = resolveShapeFactory;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.circleSource = exports.rectSource = exports.mouseSource = exports.elementSource = exports.dynamicSource = void 0;\r\nvar components_1 = require(\"../components\");\r\nvar random_1 = require(\"./random\");\r\n/**\r\n * Dynamically infers a source sampler for the specified source type.\r\n */\r\nfunction dynamicSource(source) {\r\n    if (source instanceof HTMLElement) {\r\n        return elementSource(source);\r\n    }\r\n    if (source instanceof components_1.Circle) {\r\n        return circleSource(source);\r\n    }\r\n    if (source instanceof components_1.Rect) {\r\n        return rectSource(source);\r\n    }\r\n    if (source instanceof MouseEvent) {\r\n        return mouseSource(source);\r\n    }\r\n    throw new Error(\"Cannot infer the source type of '\" + source + \"'.\");\r\n}\r\nexports.dynamicSource = dynamicSource;\r\n/**\r\n * Creates a sampler to retrieve random points inside a specified HTMLElement.\r\n */\r\nfunction elementSource(source) {\r\n    return function () { return random_1.randomInsideRect(components_1.Rect.fromElement(source)); };\r\n}\r\nexports.elementSource = elementSource;\r\n/**\r\n * Creates a sampler to retrieve the position of a mouse event.\r\n */\r\nfunction mouseSource(source) {\r\n    return function () {\r\n        return new components_1.Vector(window.scrollX + source.clientX, window.scrollY + source.clientY);\r\n    };\r\n}\r\nexports.mouseSource = mouseSource;\r\n/**\r\n * Creates a sampler to retrieve random points inside a specified rectangle.\r\n */\r\nfunction rectSource(source) {\r\n    return function () { return random_1.randomInsideRect(source); };\r\n}\r\nexports.rectSource = rectSource;\r\n/**\r\n * Creates a sampler to retrieve random points inside a specified circle.\r\n */\r\nfunction circleSource(source) {\r\n    return function () { return random_1.randomInsideCircle(source); };\r\n}\r\nexports.circleSource = circleSource;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.gradientSample = exports.splineSample = exports.skewRelative = exports.skew = exports.range = exports.evaluateVariation = void 0;\r\nvar random_1 = require(\"./random\");\r\n/**\r\n * Returns a value instance of a variation.\r\n */\r\nfunction evaluateVariation(variation) {\r\n    if (Array.isArray(variation))\r\n        return random_1.pick(variation);\r\n    if (typeof variation === \"function\")\r\n        return variation();\r\n    return variation;\r\n}\r\nexports.evaluateVariation = evaluateVariation;\r\n/**\r\n * Creates a variation function that returns a random number from min to max.\r\n */\r\nfunction range(min, max) {\r\n    return function () { return random_1.randomRange(min, max); };\r\n}\r\nexports.range = range;\r\n/**\r\n * Creates a variation function that skews the specified value by a specified, absolute\r\n * amount. This means that instead of the value itself, a random number that deviates\r\n * at most by the specified amount is returned.\r\n *\r\n * @remarks\r\n * If you want to skew by a percentage instead, use `skewRelative`.\r\n */\r\nfunction skew(value, amount) {\r\n    return function () { return value + random_1.randomRange(-amount, amount); };\r\n}\r\nexports.skew = skew;\r\n/**\r\n * Creates a variation function that skews the specified value by a specified percentage.\r\n * This means that instead of the value itself, a random number that deviates by a maximum\r\n * of the specified percentage is returned.\r\n */\r\nfunction skewRelative(value, percentage) {\r\n    return function () { return value * (1 + random_1.randomRange(-percentage, percentage)); };\r\n}\r\nexports.skewRelative = skewRelative;\r\n/**\r\n * Creates a variation function that returns a random sample from the given spline.\r\n *\r\n * @param spline The spline to sample from.\r\n */\r\nfunction splineSample(spline) {\r\n    return function () { return spline.evaluate(Math.random()); };\r\n}\r\nexports.splineSample = splineSample;\r\n/**\r\n * Creates a variation function that returns a random sample from the given gradient.\r\n *\r\n * @remarks\r\n * This function is an alias for the spline variation, since a gradient is just\r\n * a spline under the hood.\r\n *\r\n * @param gradient The gradient to sample from.\r\n */\r\nfunction gradientSample(gradient) {\r\n    return splineSample(gradient);\r\n}\r\nexports.gradientSample = gradientSample;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.confetti = void 0;\r\nvar __1 = require(\"../\");\r\nvar components_1 = require(\"../components\");\r\nvar modules_1 = require(\"../systems/modules\");\r\nvar random = require(\"../systems/random\");\r\nvar sources = require(\"../systems/sources\");\r\nvar variation = require(\"../systems/variation\");\r\nvar util = require(\"../util\");\r\n/**\r\n * The standard confetti template.\r\n *\r\n * @param source The source to emit the confetti from.\r\n * @param options The (optional) configuration overrides.\r\n */\r\nfunction confetti(source, options) {\r\n    var populated = util.overrideDefaults({\r\n        count: variation.range(20, 40),\r\n        spread: variation.range(35, 45),\r\n        speed: variation.range(300, 600),\r\n        size: variation.skew(1, 0.2),\r\n        rotation: function () { return random.randomUnitVector().scale(180); },\r\n        color: function () { return components_1.Color.fromHsl(random.randomRange(0, 360), 100, 70); },\r\n        modules: [\r\n            new modules_1.ModuleBuilder()\r\n                .drive(\"size\")\r\n                .by(function (t) { return Math.min(1, t * 3); })\r\n                .relative()\r\n                .build(),\r\n            new modules_1.ModuleBuilder()\r\n                .drive(\"rotation\")\r\n                .by(function (t) { return new components_1.Vector(140, 200, 260).scale(t); })\r\n                .relative()\r\n                .build(),\r\n        ],\r\n        shapes: [\"square\", \"circle\"],\r\n    }, options);\r\n    var emitter = __1.scene.current.createEmitter({\r\n        emitterOptions: {\r\n            loops: 1,\r\n            duration: 8,\r\n            modules: populated.modules,\r\n        },\r\n        emissionOptions: {\r\n            rate: 0,\r\n            bursts: [{ time: 0, count: populated.count }],\r\n            sourceSampler: sources.dynamicSource(source),\r\n            angle: variation.skew(-90, variation.evaluateVariation(populated.spread)),\r\n            initialLifetime: 8,\r\n            initialSpeed: populated.speed,\r\n            initialSize: populated.size,\r\n            initialRotation: populated.rotation,\r\n            initialColor: populated.color,\r\n        },\r\n        rendererOptions: {\r\n            shapeFactory: populated.shapes,\r\n        },\r\n    });\r\n    return emitter;\r\n}\r\nexports.confetti = confetti;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./confetti\"), exports);\r\n__exportStar(require(\"./sparkles\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.sparkles = void 0;\r\nvar __1 = require(\"..\");\r\nvar components_1 = require(\"../components\");\r\nvar modules_1 = require(\"../systems/modules\");\r\nvar random = require(\"../systems/random\");\r\nvar sources = require(\"../systems/sources\");\r\nvar variation = require(\"../systems/variation\");\r\nvar util = require(\"../util\");\r\n/**\r\n * The standard sparkles template.\r\n *\r\n * @param source The source to emit the sparkles from.\r\n * @param options The (optional) configuration overrides.\r\n */\r\nfunction sparkles(source, options) {\r\n    var populated = util.overrideDefaults({\r\n        lifetime: variation.range(1, 2),\r\n        count: variation.range(10, 20),\r\n        speed: variation.range(100, 200),\r\n        size: variation.range(0.8, 1.8),\r\n        rotation: function () { return new components_1.Vector(0, 0, random.randomRange(0, 360)); },\r\n        color: function () { return components_1.Color.fromHsl(50, 100, random.randomRange(55, 85)); },\r\n        modules: [\r\n            new modules_1.ModuleBuilder()\r\n                .drive(\"rotation\")\r\n                .by(function (t) { return new components_1.Vector(0, 0, 200).scale(t); })\r\n                .relative()\r\n                .build(),\r\n            new modules_1.ModuleBuilder()\r\n                .drive(\"size\")\r\n                .by(new components_1.NumericSpline({ time: 0, value: 0 }, { time: 0.3, value: 1 }, { time: 0.7, value: 1 }, { time: 1, value: 0 }))\r\n                .through(\"relativeLifetime\")\r\n                .relative()\r\n                .build(),\r\n            new modules_1.ModuleBuilder()\r\n                .drive(\"opacity\")\r\n                .by(new components_1.NumericSpline({ time: 0, value: 1 }, { time: 0.5, value: 1 }, { time: 1, value: 0 }))\r\n                .through(\"relativeLifetime\")\r\n                .build(),\r\n        ],\r\n        shapes: \"star\",\r\n    }, options);\r\n    var emitter = __1.scene.current.createEmitter({\r\n        emitterOptions: {\r\n            loops: 1,\r\n            duration: 3,\r\n            useGravity: false,\r\n            modules: populated.modules,\r\n        },\r\n        emissionOptions: {\r\n            rate: 0,\r\n            bursts: [{ time: 0, count: populated.count }],\r\n            sourceSampler: sources.dynamicSource(source),\r\n            angle: variation.range(0, 360),\r\n            initialLifetime: populated.lifetime,\r\n            initialSpeed: populated.speed,\r\n            initialSize: populated.size,\r\n            initialRotation: populated.rotation,\r\n            initialColor: populated.color,\r\n        },\r\n        rendererOptions: {\r\n            applyLighting: undefined,\r\n            shapeFactory: populated.shapes,\r\n        },\r\n    });\r\n    return emitter;\r\n}\r\nexports.sparkles = sparkles;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.overrideDefaults = void 0;\r\n/**\r\n * Replaces the supplied defaults with the properties specified in the overrides.\r\n * This returns a new object.\r\n */\r\nfunction overrideDefaults(defaults, overrides) {\r\n    return Object.assign({}, defaults, overrides);\r\n}\r\nexports.overrideDefaults = overrideDefaults;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./config\"), exports);\r\n__exportStar(require(\"./rotation\"), exports);\r\n__exportStar(require(\"./rules\"), exports);\r\n__exportStar(require(\"./lazy\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Lazy = void 0;\r\n/**\r\n * A wrapper class to lazily initialize a value.\r\n * Supports custom factory and predicate methods.\r\n */\r\nvar Lazy = /** @class */ (function () {\r\n    function Lazy(factory, exists) {\r\n        if (exists === void 0) { exists = Lazy.defaultExists; }\r\n        this.factory = factory;\r\n        this.exists = exists;\r\n    }\r\n    Object.defineProperty(Lazy.prototype, \"current\", {\r\n        /**\r\n         * The current value of the lazy object. Will be initialized, if the 'exists'\r\n         * predicate doesn't match.\r\n         */\r\n        get: function () {\r\n            if (!this.exists(this.value)) {\r\n                this.value = this.factory();\r\n            }\r\n            return this.value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Lazy.defaultExists = function (value) {\r\n        return typeof value !== \"undefined\";\r\n    };\r\n    return Lazy;\r\n}());\r\nexports.Lazy = Lazy;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.rotationToNormal = void 0;\r\nvar components_1 = require(\"../components\");\r\nvar math_1 = require(\"../systems/math\");\r\n/**\r\n * Converts the specified euler rotation (in degrees) into the corresponding normal vector.\r\n *\r\n * @remarks\r\n * The normal is calculated by placing a (figurative) plane in a coordinate-system's\r\n * origin, and rotating it by the specified angles. Note that the z-component of the\r\n * rotation is irrelevant for the normal and can be ignored. Then, two vectors\r\n * describing the orientation of the plane are calculated. Their cross product\r\n * denotes the normal vector.\r\n *\r\n * @param rotation The euler rotation angles (in degrees) to calculate the normal for.\r\n */\r\nfunction rotationToNormal(rotation) {\r\n    var alpha = rotation.x * math_1.deg2rad;\r\n    var beta = rotation.y * math_1.deg2rad;\r\n    var a = new components_1.Vector(Math.cos(beta), 0, Math.sin(beta));\r\n    var b = new components_1.Vector(0, Math.cos(alpha), Math.sin(alpha));\r\n    return a.cross(b);\r\n}\r\nexports.rotationToNormal = rotationToNormal;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.despawningRules = void 0;\r\n/**\r\n * Contains a set of pre-defined particle despawning rules.\r\n */\r\nexports.despawningRules = {\r\n    /**\r\n     * A rule that despawns a particle once its lifetime is over.\r\n     */\r\n    lifetime: function (particle) {\r\n        return particle.lifetime <= 0;\r\n    },\r\n    /**\r\n     * A rule that despawns a particle once its y-coordinate is outside of the document.\r\n     */\r\n    bounds: function (particle) {\r\n        // Get document height: https://stackoverflow.com/a/44077777/5507624\r\n        var height = document.documentElement.scrollHeight;\r\n        return particle.location.y > height;\r\n    },\r\n};\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/index.ts\");\n"],"sourceRoot":""}